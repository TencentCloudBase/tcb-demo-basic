{"version":3,"sources":["index.js"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.js","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(\"tcbAdapterWxMp\",[],t):\"object\"==typeof exports?exports.tcbAdapterWxMp=t():e.tcbAdapterWxMp=t()}(\"undefined\"!=typeof window?window:this,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){e.exports=r(1)},function(e,t,r){var o,n=this&&this.__extends||(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},a=this&&this.__awaiter||function(e,t,r,o){return new(r||(r=Promise))((function(n,i){function a(e){try{l(o.next(e))}catch(e){i(e)}}function s(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((o=o.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var r,o,n,i,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){a.label=i[1];break}if(6===i[0]&&a.label<n[1]){a.label=n[1],n=i;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(i);break}n[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,\"__esModule\",{value:!0});var l=r(3),u=r(2);var c=function(e){function t(t){void 0===t&&(t={});var r=e.call(this)||this,o=t.timeout,n=t.timeoutMsg,i=t.restrictedMethods;return r._timeout=o||0,r._timeoutMsg=n||\"请求超时\",r._restrictedMethods=i||[\"get\",\"post\",\"upload\",\"download\"],r}return n(t,e),t.prototype.post=function(e){var t=this;return new Promise((function(r,o){var n=e.url,i=e.data,a=e.headers,s=wx.request({url:l.formatUrl(\"https:\",n),data:i,timeout:t._timeout,method:\"POST\",header:a,success:function(e){r(e)},fail:function(e){o(e)},complete:function(e){if(e&&e.errMsg&&(t._timeout&&-1!==t._restrictedMethods.indexOf(\"post\")&&\"request:fail timeout\"===e.errMsg)){console.warn(t._timeoutMsg);try{s.abort()}catch(e){}}}})}))},t.prototype.upload=function(e){var t=this,r=this;return new Promise((function(o){return a(t,void 0,void 0,(function(){var t,n,a,l,u,c;return s(this,(function(s){return t=e.url,n=e.file,a=e.data,l=e.headers,u=e.onUploadProgress,c=wx.uploadFile({url:t,filePath:n,name:\"file\",formData:i({},a),header:l,timeout:this._timeout,success:function(e){var t={statusCode:e.statusCode,data:e.data||{}};200===e.statusCode&&a.success_action_status&&(t.statusCode=parseInt(a.success_action_status,10)),o(t)},fail:function(e){o(e)},complete:function(e){if(e&&e.errMsg&&(r._timeout&&-1!==r._restrictedMethods.indexOf(\"upload\")&&\"request:fail timeout\"===e.errMsg)){console.warn(r._timeoutMsg);try{c.abort()}catch(e){}}}}),u&&c.onProgressUpdate((function(e){u(e)})),[2]}))}))}))},t.prototype.download=function(e){var t=this,r=this;return new Promise((function(o,n){var i=e.url,a=e.headers,s=wx.downloadFile({url:l.formatUrl(\"https:\",i),header:a,timeout:t._timeout,success:function(e){200===e.statusCode&&e.tempFilePath?o({statusCode:200,tempFilePath:e.tempFilePath}):o(e)},fail:function(e){n(e)},complete:function(e){if(e&&e.errMsg&&(r._timeout&&-1!==r._restrictedMethods.indexOf(\"download\")&&\"request:fail timeout\"===e.errMsg)){console.warn(r._timeoutMsg);try{s.abort()}catch(e){}}}})}))},t.prototype.fetch=function(e){var t=e.url,r=e.body,o=e.enableAbort,n=e.headers,i=e.method,a=e.stream,s=void 0!==a&&a,c=e.signal,d=this,f=null,h=new u.ReadableStream({start:function(e){f=e},cancel:function(){f=null}});return new Promise((function(e,a){s&&e({data:h});var u=wx.request({url:l.formatUrl(\"https:\",t),data:r,timeout:d._timeout,method:i.toUpperCase(),header:n,success:function(t){var r;null===(r=f)||void 0===r||r.close(),!s&&e(t)},fail:function(e){var t;if(null===(t=f)||void 0===t||t.close(),a(e),s)throw e},complete:function(e){if(e&&e.errMsg&&(d._timeout&&-1!==d._restrictedMethods.indexOf(\"post\")&&o&&\"request:fail timeout\"===e.errMsg)){console.warn(d._timeoutMsg);try{u.abort()}catch(e){console.warn(\"Error when aborting requestTask\",e)}}},enableChunked:s});if(u.onChunkReceived((function(e){var t;null===(t=f)||void 0===t||t.enqueue(new Uint8Array(e.data))})),c){var b=function(){try{u.abort()}catch(e){console.warn(\"Error when aborting requestTask\",e)}};c.aborted?b():c.addEventListener(\"abort\",(function(){return b()}))}}))},t}(l.AbstractSDKRequest);t.WxRequest=c,t.wxMpStorage={setItem:function(e,t){wx.setStorageSync(e,t)},getItem:function(e){return wx.getStorageSync(e)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}};var d=function(e,t){void 0===t&&(t={});var r=wx.connectSocket(i({url:e},t));return{set onopen(e){r.onOpen(e)},set onmessage(e){r.onMessage(e)},set onclose(e){r.onClose(e)},set onerror(e){r.onError(e)},send:function(e){return r.send({data:e})},close:function(e,t){return r.close({code:e,reason:t})},get readyState(){return r.readyState},CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3}};t.WxMpWebSocket=d;var f={genAdapter:function(){return{root:{},reqClass:c,wsClass:d,localStorage:t.wxMpStorage,primaryStorage:l.StorageType.local,getAppSign:function(){var e=wx.getAccountInfoSync();return\"undefined\"!=typeof App||\"undefined\"!=typeof getApp||wx.onAppHide||wx.offAppHide||wx.onAppShow||wx.offAppShow?e&&e.miniProgram?e.miniProgram.appId:\"\":e&&e.plugin?e.plugin.appId:\"\"}}},isMatch:function(){if(\"undefined\"==typeof wx)return!1;if(\"undefined\"==typeof Page)return!1;if(!wx.getSystemInfoSync)return!1;if(!wx.getStorageSync)return!1;if(!wx.setStorageSync)return!1;if(!wx.connectSocket)return!1;if(!wx.request)return!1;try{if(!wx.getSystemInfoSync())return!1;if(\"qq\"===wx.getSystemInfoSync().AppPlatform)return!1}catch(e){return!1}return!0},runtime:\"wx_mp\"};t.default=f},function(e,t,r){\n/**\n * @license\n * web-streams-polyfill v4.0.0\n * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.\n * This code is released under the MIT license.\n * SPDX-License-Identifier: MIT\n */\nfunction o(){}function n(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}r.r(t),r.d(t,\"ByteLengthQueuingStrategy\",(function(){return Qr})),r.d(t,\"CountQueuingStrategy\",(function(){return Vr})),r.d(t,\"ReadableByteStreamController\",(function(){return Ee})),r.d(t,\"ReadableStream\",(function(){return Ar})),r.d(t,\"ReadableStreamBYOBReader\",(function(){return lt})),r.d(t,\"ReadableStreamBYOBRequest\",(function(){return Ce})),r.d(t,\"ReadableStreamDefaultController\",(function(){return br})),r.d(t,\"ReadableStreamDefaultReader\",(function(){return ee})),r.d(t,\"TransformStream\",(function(){return to})),r.d(t,\"TransformStreamDefaultController\",(function(){return so})),r.d(t,\"WritableStream\",(function(){return Tt})),r.d(t,\"WritableStreamDefaultController\",(function(){return Nt})),r.d(t,\"WritableStreamDefaultWriter\",(function(){return Bt}));const i=o;function a(e,t){try{Object.defineProperty(e,\"name\",{value:t,configurable:!0})}catch(e){}}const s=Promise,l=Promise.resolve.bind(s),u=Promise.prototype.then,c=Promise.reject.bind(s),d=l;function f(e){return new s(e)}function h(e){return f(t=>t(e))}function b(e){return c(e)}function _(e,t,r){return u.call(e,t,r)}function p(e,t,r){_(_(e,t,r),void 0,i)}function m(e,t){p(e,t)}function y(e,t){p(e,void 0,t)}function g(e,t,r){return _(e,t,r)}function v(e){_(e,void 0,i)}let w=e=>{if(\"function\"==typeof queueMicrotask)w=queueMicrotask;else{const e=h(void 0);w=t=>_(e,t)}return w(e)};function S(e,t,r){if(\"function\"!=typeof e)throw new TypeError(\"Argument is not a function\");return Function.prototype.apply.call(e,t,r)}function T(e,t,r){try{return h(S(e,t,r))}catch(e){return b(e)}}class R{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let o=r+1;const n=e._elements,i=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(r=r._next,o=r._elements,t=0,0===o.length));)e(o[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}const P=Symbol(\"[[AbortSteps]]\"),q=Symbol(\"[[ErrorSteps]]\"),C=Symbol(\"[[CancelSteps]]\"),E=Symbol(\"[[PullSteps]]\"),O=Symbol(\"[[ReleaseSteps]]\");function j(e,t){e._ownerReadableStream=t,t._reader=e,\"readable\"===t._state?z(e):\"closed\"===t._state?function(e){z(e),I(e)}(e):x(e,t._storedError)}function k(e,t){return Mr(e._ownerReadableStream,t)}function A(e){const t=e._ownerReadableStream;\"readable\"===t._state?B(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\")):function(e,t){x(e,new TypeError(\"Reader was released and can no longer be used to monitor the stream's closedness\"))}(e),t._readableStreamController[O](),t._reader=void 0,e._ownerReadableStream=void 0}function W(e){return new TypeError(\"Cannot \"+e+\" a stream using a released reader\")}function z(e){e._closedPromise=f((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r})}function x(e,t){z(e),B(e,t)}function B(e,t){void 0!==e._closedPromise_reject&&(v(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function I(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const M=Number.isFinite||function(e){return\"number\"==typeof e&&isFinite(e)},F=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function L(e,t){if(void 0!==e&&\"object\"!=typeof(r=e)&&\"function\"!=typeof r)throw new TypeError(`${t} is not an object.`);var r}function $(e,t){if(\"function\"!=typeof e)throw new TypeError(`${t} is not a function.`)}function D(e,t){if(!function(e){return\"object\"==typeof e&&null!==e||\"function\"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function N(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function Q(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function U(e){return Number(e)}function Y(e){return 0===e?0:e}function H(e,t){const r=Number.MAX_SAFE_INTEGER;let o=Number(e);if(o=Y(o),!M(o))throw new TypeError(`${t} is not a finite number`);if(o=function(e){return Y(F(e))}(o),o<0||o>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return M(o)&&0!==o?o:0}function V(e,t){if(!Br(e))throw new TypeError(`${t} is not a ReadableStream.`)}function G(e){return new ee(e)}function K(e,t){e._reader._readRequests.push(t)}function X(e,t,r){const o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function J(e){return e._reader._readRequests.length}function Z(e){const t=e._reader;return void 0!==t&&!!te(t)}class ee{constructor(e){if(N(e,1,\"ReadableStreamDefaultReader\"),V(e,\"First parameter\"),Ir(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");j(this,e),this._readRequests=new R}get closed(){return te(this)?this._closedPromise:b(ne(\"closed\"))}cancel(e){return te(this)?void 0===this._ownerReadableStream?b(W(\"cancel\")):k(this,e):b(ne(\"cancel\"))}read(){if(!te(this))return b(ne(\"read\"));if(void 0===this._ownerReadableStream)return b(W(\"read from\"));let e,t;const r=f((r,o)=>{e=r,t=o});return re(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!te(this))throw ne(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){A(e),oe(e,new TypeError(\"Reader was released\"))}(this)}}function te(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readRequests\")&&e instanceof ee}function re(e,t){const r=e._ownerReadableStream;r._disturbed=!0,\"closed\"===r._state?t._closeSteps():\"errored\"===r._state?t._errorSteps(r._storedError):r._readableStreamController[E](t)}function oe(e,t){const r=e._readRequests;e._readRequests=new R,r.forEach(e=>{e._errorSteps(t)})}function ne(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}var ie,ae,se;function le(e){return e.slice()}function ue(e,t,r,o,n){new Uint8Array(e).set(new Uint8Array(r,o,n),t)}Object.defineProperties(ee.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(ee.prototype.cancel,\"cancel\"),a(ee.prototype.read,\"read\"),a(ee.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(ee.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultReader\",configurable:!0});let ce=e=>(ce=\"function\"==typeof e.transfer?e=>e.transfer():\"function\"==typeof structuredClone?e=>structuredClone(e,{transfer:[e]}):e=>e,ce(e)),de=e=>(de=\"boolean\"==typeof e.detached?e=>e.detached:e=>0===e.byteLength,de(e));function fe(e,t,r){if(e.slice)return e.slice(t,r);const o=r-t,n=new ArrayBuffer(o);return ue(n,0,e,t,o),n}function he(e,t){const r=e[t];if(null!=r){if(\"function\"!=typeof r)throw new TypeError(`${String(t)} is not a function`);return r}}function be(e){try{const t=e.done,r=e.value;return _(d(r),e=>({done:t,value:e}))}catch(e){return b(e)}}const _e=null!==(se=null!==(ie=Symbol.asyncIterator)&&void 0!==ie?ie:null===(ae=Symbol.for)||void 0===ae?void 0:ae.call(Symbol,\"Symbol.asyncIterator\"))&&void 0!==se?se:\"@@asyncIterator\";function pe(e){const t=S(e.nextMethod,e.iterator,[]);if(!n(t))throw new TypeError(\"The iterator.next() method must return an object\");return t}class me{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?g(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?g(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let t,r;const o=f((e,o)=>{t=e,r=o});return re(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,w(()=>t({value:e,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,A(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,A(e),r(t)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(!this._preventCancel){const r=k(t,e);return A(t),g(r,()=>({value:e,done:!0}))}return A(t),h({value:e,done:!0})}}const ye={next(){return ge(this)?this._asyncIteratorImpl.next():b(ve(\"next\"))},return(e){return ge(this)?this._asyncIteratorImpl.return(e):b(ve(\"return\"))},[_e](){return this}};function ge(e){if(!n(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,\"_asyncIteratorImpl\"))return!1;try{return e._asyncIteratorImpl instanceof me}catch(e){return!1}}function ve(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Object.defineProperty(ye,_e,{enumerable:!1});const we=Number.isNaN||function(e){return e!=e};function Se(e){const t=fe(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function Te(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function Re(e,t,r){if(\"number\"!=typeof(o=r)||we(o)||o<0||r===1/0)throw new RangeError(\"Size must be a finite, non-NaN, non-negative number.\");var o;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function Pe(e){e._queue=new R,e._queueTotalSize=0}function qe(e){return e===DataView}class Ce{constructor(){throw new TypeError(\"Illegal constructor\")}get view(){if(!je(this))throw tt(\"view\");return this._view}respond(e){if(!je(this))throw tt(\"respond\");if(N(e,1,\"respond\"),e=H(e,\"First parameter\"),void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(de(this._view.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be used as a response\");Je(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!je(this))throw tt(\"respondWithNewView\");if(N(e,1,\"respondWithNewView\"),!ArrayBuffer.isView(e))throw new TypeError(\"You can only respond with array buffer views\");if(void 0===this._associatedReadableByteStreamController)throw new TypeError(\"This BYOB request has been invalidated\");if(de(e.buffer))throw new TypeError(\"The given view's buffer has been detached and so cannot be used as a response\");Ze(this._associatedReadableByteStreamController,e)}}Object.defineProperties(Ce.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),a(Ce.prototype.respond,\"respond\"),a(Ce.prototype.respondWithNewView,\"respondWithNewView\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Ce.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBRequest\",configurable:!0});class Ee{constructor(){throw new TypeError(\"Illegal constructor\")}get byobRequest(){if(!Oe(this))throw rt(\"byobRequest\");return Ke(this)}get desiredSize(){if(!Oe(this))throw rt(\"desiredSize\");return Xe(this)}close(){if(!Oe(this))throw rt(\"close\");if(this._closeRequested)throw new TypeError(\"The stream has already been closed; do not close it again!\");const e=this._controlledReadableByteStream._state;if(\"readable\"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ye(this)}enqueue(e){if(!Oe(this))throw rt(\"enqueue\");if(N(e,1,\"enqueue\"),!ArrayBuffer.isView(e))throw new TypeError(\"chunk must be an array buffer view\");if(0===e.byteLength)throw new TypeError(\"chunk must have non-zero byteLength\");if(0===e.buffer.byteLength)throw new TypeError(\"chunk's buffer must have non-zero byteLength\");if(this._closeRequested)throw new TypeError(\"stream is closed or draining\");const t=this._controlledReadableByteStream._state;if(\"readable\"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);He(this,e)}error(e){if(!Oe(this))throw rt(\"error\");Ve(this,e)}[C](e){Ae(this),Pe(this);const t=this._cancelAlgorithm(e);return Ue(this),t}[E](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Ge(this,e);const r=this._autoAllocateChunkSize;if(void 0!==r){let o;try{o=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const n={buffer:o,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:\"default\"};this._pendingPullIntos.push(n)}K(t,e),ke(this)}[O](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType=\"none\",this._pendingPullIntos=new R,this._pendingPullIntos.push(e)}}}function Oe(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableByteStream\")&&e instanceof Ee}function je(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_associatedReadableByteStreamController\")&&e instanceof Ce}function ke(e){(function(e){const t=e._controlledReadableByteStream;return\"readable\"===t._state&&(!e._closeRequested&&(!!e._started&&(!!(Z(t)&&J(t)>0)||(!!(st(t)&&at(t)>0)||Xe(e)>0))))})(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ke(e)),null),t=>(Ve(e,t),null))))}function Ae(e){$e(e),e._pendingPullIntos=new R}function We(e,t){let r=!1;\"closed\"===e._state&&(r=!0);const o=ze(t);\"default\"===t.readerType?X(e,o,r):function(e,t,r){const o=e._reader._readIntoRequests.shift();r?o._closeSteps(t):o._chunkSteps(t)}(e,o,r)}function ze(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function xe(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function Be(e,t,r,o){let n;try{n=fe(t,r,r+o)}catch(t){throw Ve(e,t),t}xe(e,n,0,o)}function Ie(e,t){t.bytesFilled>0&&Be(e,t.buffer,t.byteOffset,t.bytesFilled),Qe(e)}function Me(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+r;let n=r,i=!1;const a=o-o%t.elementSize;a>=t.minimumFill&&(n=a-t.bytesFilled,i=!0);const s=e._queue;for(;n>0;){const r=s.peek(),o=Math.min(n,r.byteLength),i=t.byteOffset+t.bytesFilled;ue(t.buffer,i,r.buffer,r.byteOffset,o),r.byteLength===o?s.shift():(r.byteOffset+=o,r.byteLength-=o),e._queueTotalSize-=o,Fe(e,o,t),n-=o}return i}function Fe(e,t,r){r.bytesFilled+=t}function Le(e){0===e._queueTotalSize&&e._closeRequested?(Ue(e),Fr(e._controlledReadableByteStream)):ke(e)}function $e(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function De(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();Me(e,t)&&(Qe(e),We(e._controlledReadableByteStream,t))}}function Ne(e,t){const r=e._pendingPullIntos.peek();$e(e),\"closed\"===e._controlledReadableByteStream._state?function(e,t){\"none\"===t.readerType&&Qe(e);const r=e._controlledReadableByteStream;if(st(r))for(;at(r)>0;)We(r,Qe(e))}(e,r):function(e,t,r){if(Fe(0,t,r),\"none\"===r.readerType)return Ie(e,r),void De(e);if(r.bytesFilled<r.minimumFill)return;Qe(e);const o=r.bytesFilled%r.elementSize;if(o>0){const t=r.byteOffset+r.bytesFilled;Be(e,r.buffer,t-o,o)}r.bytesFilled-=o,We(e._controlledReadableByteStream,r),De(e)}(e,t,r),ke(e)}function Qe(e){return e._pendingPullIntos.shift()}function Ue(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ye(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&\"readable\"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(t.bytesFilled%t.elementSize!=0){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");throw Ve(e,t),t}}Ue(e),Fr(t)}}function He(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||\"readable\"!==r._state)return;const{buffer:o,byteOffset:n,byteLength:i}=t;if(de(o))throw new TypeError(\"chunk's buffer is detached and so cannot be enqueued\");const a=ce(o);if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(de(t.buffer))throw new TypeError(\"The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk\");$e(e),t.buffer=ce(t.buffer),\"none\"===t.readerType&&Ie(e,t)}Z(r)?(function(e){const t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(0===e._queueTotalSize)return;Ge(e,t._readRequests.shift())}}(e),0===J(r)?xe(e,a,n,i):(e._pendingPullIntos.length>0&&Qe(e),X(r,new Uint8Array(a,n,i),!1))):st(r)?(xe(e,a,n,i),De(e)):xe(e,a,n,i),ke(e)}function Ve(e,t){const r=e._controlledReadableByteStream;\"readable\"===r._state&&(Ae(e),Pe(e),Ue(e),Lr(r,t))}function Ge(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength,Le(e);const o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(o)}function Ke(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),o=Object.create(Ce.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(o,e,r),e._byobRequest=o}return e._byobRequest}function Xe(e){const t=e._controlledReadableByteStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function Je(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError(\"bytesWritten must be 0 when calling respond() on a closed stream\")}else{if(0===t)throw new TypeError(\"bytesWritten must be greater than 0 when calling respond() on a readable stream\");if(r.bytesFilled+t>r.byteLength)throw new RangeError(\"bytesWritten out of range\")}r.buffer=ce(r.buffer),Ne(e,t)}function Ze(e,t){const r=e._pendingPullIntos.peek();if(\"closed\"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError(\"The view's length must be 0 when calling respondWithNewView() on a closed stream\")}else if(0===t.byteLength)throw new TypeError(\"The view's length must be greater than 0 when calling respondWithNewView() on a readable stream\");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError(\"The region specified by view does not match byobRequest\");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError(\"The buffer of view has different capacity than byobRequest\");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError(\"The region specified by view is larger than byobRequest\");const o=t.byteLength;r.buffer=ce(t.buffer),Ne(e,o)}function et(e,t,r,o,n,i,a){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Pe(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=a,t._pendingPullIntos=new R,e._readableStreamController=t,p(h(r()),()=>(t._started=!0,ke(t),null),e=>(Ve(t,e),null))}function tt(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function rt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function ot(e,t){if(\"byob\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function nt(e){return new lt(e)}function it(e,t){e._reader._readIntoRequests.push(t)}function at(e){return e._reader._readIntoRequests.length}function st(e){const t=e._reader;return void 0!==t&&!!ut(t)}Object.defineProperties(Ee.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),a(Ee.prototype.close,\"close\"),a(Ee.prototype.enqueue,\"enqueue\"),a(Ee.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Ee.prototype,Symbol.toStringTag,{value:\"ReadableByteStreamController\",configurable:!0});class lt{constructor(e){if(N(e,1,\"ReadableStreamBYOBReader\"),V(e,\"First parameter\"),Ir(e))throw new TypeError(\"This stream has already been locked for exclusive reading by another reader\");if(!Oe(e._readableStreamController))throw new TypeError(\"Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source\");j(this,e),this._readIntoRequests=new R}get closed(){return ut(this)?this._closedPromise:b(ft(\"closed\"))}cancel(e){return ut(this)?void 0===this._ownerReadableStream?b(W(\"cancel\")):k(this,e):b(ft(\"cancel\"))}read(e,t={}){if(!ut(this))return b(ft(\"read\"));if(!ArrayBuffer.isView(e))return b(new TypeError(\"view must be an array buffer view\"));if(0===e.byteLength)return b(new TypeError(\"view must have non-zero byteLength\"));if(0===e.buffer.byteLength)return b(new TypeError(\"view's buffer must have non-zero byteLength\"));if(de(e.buffer))return b(new TypeError(\"view's buffer has been detached\"));let r;try{r=function(e,t){var r;return L(e,t),{min:H(null!==(r=null==e?void 0:e.min)&&void 0!==r?r:1,`${t} has member 'min' that`)}}(t,\"options\")}catch(e){return b(e)}const o=r.min;if(0===o)return b(new TypeError(\"options.min must be greater than 0\"));if(function(e){return qe(e.constructor)}(e)){if(o>e.byteLength)return b(new RangeError(\"options.min must be less than or equal to view's byteLength\"))}else if(o>e.length)return b(new RangeError(\"options.min must be less than or equal to view's length\"));if(void 0===this._ownerReadableStream)return b(W(\"read from\"));let n,i;const a=f((e,t)=>{n=e,i=t});return ct(this,e,o,{_chunkSteps:e=>n({value:e,done:!1}),_closeSteps:e=>n({value:e,done:!0}),_errorSteps:e=>i(e)}),a}releaseLock(){if(!ut(this))throw ft(\"releaseLock\");void 0!==this._ownerReadableStream&&function(e){A(e),dt(e,new TypeError(\"Reader was released\"))}(this)}}function ut(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readIntoRequests\")&&e instanceof lt}function ct(e,t,r,o){const n=e._ownerReadableStream;n._disturbed=!0,\"errored\"===n._state?o._errorSteps(n._storedError):function(e,t,r,o){const n=e._controlledReadableByteStream,i=t.constructor,a=function(e){return qe(e)?1:e.BYTES_PER_ELEMENT}(i),{byteOffset:s,byteLength:l}=t,u=r*a;let c;try{c=ce(t.buffer)}catch(e){return void o._errorSteps(e)}const d={buffer:c,bufferByteLength:c.byteLength,byteOffset:s,byteLength:l,bytesFilled:0,minimumFill:u,elementSize:a,viewConstructor:i,readerType:\"byob\"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(d),void it(n,o);if(\"closed\"!==n._state){if(e._queueTotalSize>0){if(Me(e,d)){const t=ze(d);return Le(e),void o._chunkSteps(t)}if(e._closeRequested){const t=new TypeError(\"Insufficient bytes to fill elements in the given buffer\");return Ve(e,t),void o._errorSteps(t)}}e._pendingPullIntos.push(d),it(n,o),ke(e)}else{const e=new i(d.buffer,d.byteOffset,0);o._closeSteps(e)}}(n._readableStreamController,t,r,o)}function dt(e,t){const r=e._readIntoRequests;e._readIntoRequests=new R,r.forEach(e=>{e._errorSteps(t)})}function ft(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ht(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(we(r)||r<0)throw new RangeError(\"Invalid highWaterMark\");return r}function bt(e){const{size:t}=e;return t||(()=>1)}function _t(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:U(r),size:void 0===o?void 0:pt(o,`${t} has member 'size' that`)}}function pt(e,t){return $(e,t),t=>U(e(t))}function mt(e,t,r){return $(e,r),r=>T(e,t,[r])}function yt(e,t,r){return $(e,r),()=>T(e,t,[])}function gt(e,t,r){return $(e,r),r=>S(e,t,[r])}function vt(e,t,r){return $(e,r),(r,o)=>T(e,t,[r,o])}function wt(e,t){if(!qt(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(lt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(lt.prototype.cancel,\"cancel\"),a(lt.prototype.read,\"read\"),a(lt.prototype.releaseLock,\"releaseLock\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(lt.prototype,Symbol.toStringTag,{value:\"ReadableStreamBYOBReader\",configurable:!0});const St=\"function\"==typeof AbortController;class Tt{constructor(e={},t={}){void 0===e?e=null:D(e,\"First parameter\");const r=_t(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,i=null==e?void 0:e.type,a=null==e?void 0:e.write;return{abort:void 0===r?void 0:mt(r,e,`${t} has member 'abort' that`),close:void 0===o?void 0:yt(o,e,`${t} has member 'close' that`),start:void 0===n?void 0:gt(n,e,`${t} has member 'start' that`),write:void 0===a?void 0:vt(a,e,`${t} has member 'write' that`),type:i}}(e,\"First parameter\");if(Pt(this),void 0!==o.type)throw new RangeError(\"Invalid type is specified\");const n=bt(r);!function(e,t,r,o){const n=Object.create(Nt.prototype);let i,a,s,l;i=void 0!==t.start?()=>t.start(n):()=>{},a=void 0!==t.write?e=>t.write(e,n):()=>h(void 0),s=void 0!==t.close?()=>t.close():()=>h(void 0),l=void 0!==t.abort?e=>t.abort(e):()=>h(void 0),Ut(e,n,i,a,s,l,r,o)}(this,o,ht(r,1),n)}get locked(){if(!qt(this))throw Jt(\"locked\");return Ct(this)}abort(e){return qt(this)?Ct(this)?b(new TypeError(\"Cannot abort a stream that already has a writer\")):Et(this,e):b(Jt(\"abort\"))}close(){return qt(this)?Ct(this)?b(new TypeError(\"Cannot close a stream that already has a writer\")):Wt(this)?b(new TypeError(\"Cannot close an already-closing stream\")):Ot(this):b(Jt(\"close\"))}getWriter(){if(!qt(this))throw Jt(\"getWriter\");return Rt(this)}}function Rt(e){return new Bt(e)}function Pt(e){e._state=\"writable\",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new R,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function qt(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_writableStreamController\")&&e instanceof Tt}function Ct(e){return void 0!==e._writer}function Et(e,t){var r;if(\"closed\"===e._state||\"errored\"===e._state)return h(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort(t);const o=e._state;if(\"closed\"===o||\"errored\"===o)return h(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let n=!1;\"erroring\"===o&&(n=!0,t=void 0);const i=f((r,o)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}});return e._pendingAbortRequest._promise=i,n||kt(e,t),i}function Ot(e){const t=e._state;if(\"closed\"===t||\"errored\"===t)return b(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=f((t,r)=>{const o={_resolve:t,_reject:r};e._closeRequest=o}),o=e._writer;var n;return void 0!==o&&e._backpressure&&\"writable\"===t&&cr(o),Re(n=e._writableStreamController,Dt,0),Vt(n),r}function jt(e,t){\"writable\"!==e._state?At(e):kt(e,t)}function kt(e,t){const r=e._writableStreamController;e._state=\"erroring\",e._storedError=t;const o=e._writer;void 0!==o&&Ft(o,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&At(e)}function At(e){e._state=\"errored\",e._writableStreamController[q]();const t=e._storedError;if(e._writeRequests.forEach(e=>{e._reject(t)}),e._writeRequests=new R,void 0===e._pendingAbortRequest)return void zt(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void zt(e);p(e._writableStreamController[P](r._reason),()=>(r._resolve(),zt(e),null),t=>(r._reject(t),zt(e),null))}function Wt(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function zt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&nr(t,e._storedError)}function xt(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){ar(e)}(r):cr(r)),e._backpressure=t}Object.defineProperties(Tt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),a(Tt.prototype.abort,\"abort\"),a(Tt.prototype.close,\"close\"),a(Tt.prototype.getWriter,\"getWriter\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Tt.prototype,Symbol.toStringTag,{value:\"WritableStream\",configurable:!0});class Bt{constructor(e){if(N(e,1,\"WritableStreamDefaultWriter\"),wt(e,\"First parameter\"),Ct(e))throw new TypeError(\"This stream has already been locked for exclusive writing by another writer\");this._ownerWritableStream=e,e._writer=this;const t=e._state;if(\"writable\"===t)!Wt(e)&&e._backpressure?ar(this):lr(this),rr(this);else if(\"erroring\"===t)sr(this,e._storedError),rr(this);else if(\"closed\"===t)lr(this),rr(this),ir(this);else{const t=e._storedError;sr(this,t),or(this,t)}}get closed(){return It(this)?this._closedPromise:b(er(\"closed\"))}get desiredSize(){if(!It(this))throw er(\"desiredSize\");if(void 0===this._ownerWritableStream)throw tr(\"desiredSize\");return function(e){const t=e._ownerWritableStream,r=t._state;return\"errored\"===r||\"erroring\"===r?null:\"closed\"===r?0:Ht(t._writableStreamController)}(this)}get ready(){return It(this)?this._readyPromise:b(er(\"ready\"))}abort(e){return It(this)?void 0===this._ownerWritableStream?b(tr(\"abort\")):function(e,t){return Et(e._ownerWritableStream,t)}(this,e):b(er(\"abort\"))}close(){if(!It(this))return b(er(\"close\"));const e=this._ownerWritableStream;return void 0===e?b(tr(\"close\")):Wt(e)?b(new TypeError(\"Cannot close an already-closing stream\")):Mt(this)}releaseLock(){if(!It(this))throw er(\"releaseLock\");void 0!==this._ownerWritableStream&&Lt(this)}write(e){return It(this)?void 0===this._ownerWritableStream?b(tr(\"write to\")):$t(this,e):b(er(\"write\"))}}function It(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_ownerWritableStream\")&&e instanceof Bt}function Mt(e){return Ot(e._ownerWritableStream)}function Ft(e,t){\"pending\"===e._readyPromiseState?ur(e,t):function(e,t){sr(e,t)}(e,t)}function Lt(e){const t=e._ownerWritableStream,r=new TypeError(\"Writer was released and can no longer be used to monitor the stream's closedness\");Ft(e,r),function(e,t){\"pending\"===e._closedPromiseState?nr(e,t):function(e,t){or(e,t)}(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function $t(e,t){const r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Gt(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return b(tr(\"write to\"));const i=r._state;if(\"errored\"===i)return b(r._storedError);if(Wt(r)||\"closed\"===i)return b(new TypeError(\"The stream is closing or closed and cannot be written to\"));if(\"erroring\"===i)return b(r._storedError);const a=function(e){return f((t,r)=>{const o={_resolve:t,_reject:r};e._writeRequests.push(o)})}(r);return function(e,t,r){try{Re(e,t,r)}catch(t){return void Gt(e,t)}const o=e._controlledWritableStream;Wt(o)||\"writable\"!==o._state||xt(o,Kt(e)),Vt(e)}(o,t,n),a}Object.defineProperties(Bt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),a(Bt.prototype.abort,\"abort\"),a(Bt.prototype.close,\"close\"),a(Bt.prototype.releaseLock,\"releaseLock\"),a(Bt.prototype.write,\"write\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Bt.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultWriter\",configurable:!0});const Dt={};class Nt{constructor(){throw new TypeError(\"Illegal constructor\")}get abortReason(){if(!Qt(this))throw Zt(\"abortReason\");return this._abortReason}get signal(){if(!Qt(this))throw Zt(\"signal\");if(void 0===this._abortController)throw new TypeError(\"WritableStreamDefaultController.prototype.signal is not supported\");return this._abortController.signal}error(e){if(!Qt(this))throw Zt(\"error\");\"writable\"===this._controlledWritableStream._state&&Xt(this,e)}[P](e){const t=this._abortAlgorithm(e);return Yt(this),t}[q](){Pe(this)}}function Qt(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledWritableStream\")&&e instanceof Nt}function Ut(e,t,r,o,n,i,a,s){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Pe(t),t._abortReason=void 0,t._abortController=function(){if(St)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=s,t._strategyHWM=a,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=i;const l=Kt(t);xt(e,l),p(h(r()),()=>(t._started=!0,Vt(t),null),r=>(t._started=!0,jt(e,r),null))}function Yt(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ht(e){return e._strategyHWM-e._queueTotalSize}function Vt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if(\"erroring\"===t._state)return void At(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===Dt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),Te(e);const r=e._closeAlgorithm();Yt(e),p(r,()=>(function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,\"erroring\"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state=\"closed\";const t=e._writer;void 0!==t&&ir(t)}(t),null),e=>(function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),jt(e,t)}(t,e),null))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r),p(e._writeAlgorithm(t),()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(Te(e),!Wt(r)&&\"writable\"===t){const t=Kt(e);xt(r,t)}return Vt(e),null},t=>(\"writable\"===r._state&&Yt(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,jt(e,t)}(r,t),null))}(e,r)}function Gt(e,t){\"writable\"===e._controlledWritableStream._state&&Xt(e,t)}function Kt(e){return Ht(e)<=0}function Xt(e,t){const r=e._controlledWritableStream;Yt(e),kt(r,t)}function Jt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Zt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function er(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function tr(e){return new TypeError(\"Cannot \"+e+\" a stream using a released writer\")}function rr(e){e._closedPromise=f((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState=\"pending\"})}function or(e,t){rr(e),nr(e,t)}function nr(e,t){void 0!==e._closedPromise_reject&&(v(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"rejected\")}function ir(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState=\"resolved\")}function ar(e){e._readyPromise=f((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r}),e._readyPromiseState=\"pending\"}function sr(e,t){ar(e),ur(e,t)}function lr(e){ar(e),cr(e)}function ur(e,t){void 0!==e._readyPromise_reject&&(v(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"rejected\")}function cr(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState=\"fulfilled\")}Object.defineProperties(Nt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Nt.prototype,Symbol.toStringTag,{value:\"WritableStreamDefaultController\",configurable:!0});const dr=\"undefined\"!=typeof globalThis?globalThis:\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:void 0,fr=function(){const e=null==dr?void 0:dr.DOMException;return function(e){if(\"function\"!=typeof e&&\"object\"!=typeof e)return!1;if(\"DOMException\"!==e.name)return!1;try{return new e,!0}catch(e){return!1}}(e)?e:void 0}()||function(){const e=function(e,t){this.message=e||\"\",this.name=t||\"Error\",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return a(e,\"DOMException\"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,\"constructor\",{value:e,writable:!0,configurable:!0}),e}();function hr(e,t,r,n,i,a){const s=G(e),l=Rt(t);e._disturbed=!0;let u=!1,c=h(void 0);return f((d,g)=>{let w;if(void 0!==a){if(w=()=>{const r=void 0!==a.reason?a.reason:new fr(\"Aborted\",\"AbortError\"),o=[];n||o.push(()=>\"writable\"===t._state?Et(t,r):h(void 0)),i||o.push(()=>\"readable\"===e._state?Mr(e,r):h(void 0)),C(()=>Promise.all(o.map(e=>e())),!0,r)},a.aborted)return void w();a.addEventListener(\"abort\",w)}var S,T,R;if(q(e,s._closedPromise,e=>(n?E(!0,e):C(()=>Et(t,e),!0,e),null)),q(t,l._closedPromise,t=>(i?E(!0,t):C(()=>Mr(e,t),!0,t),null)),S=e,T=s._closedPromise,R=()=>(r?E():C(()=>(function(e){const t=e._ownerWritableStream,r=t._state;return Wt(t)||\"closed\"===r?h(void 0):\"errored\"===r?b(t._storedError):Mt(e)})(l)),null),\"closed\"===S._state?R():m(T,R),Wt(t)||\"closed\"===t._state){const t=new TypeError(\"the destination writable stream closed before all data could be piped to it\");i?E(!0,t):C(()=>Mr(e,t),!0,t)}function P(){const e=c;return _(c,()=>e!==c?P():void 0)}function q(e,t,r){\"errored\"===e._state?r(e._storedError):y(t,r)}function C(e,r,o){function n(){return p(e(),()=>O(r,o),e=>O(!0,e)),null}u||(u=!0,\"writable\"!==t._state||Wt(t)?n():m(P(),n))}function E(e,r){u||(u=!0,\"writable\"!==t._state||Wt(t)?O(e,r):m(P(),()=>O(e,r)))}function O(e,t){return Lt(l),A(s),void 0!==a&&a.removeEventListener(\"abort\",w),e?g(t):d(void 0),null}v(f((e,t)=>{!function r(n){n?e():_(u?h(!0):_(l._readyPromise,()=>f((e,t)=>{re(s,{_chunkSteps:t=>{c=_($t(l,t),void 0,o),e(!1)},_closeSteps:()=>e(!0),_errorSteps:t})})),r,t)}(!1)}))})}class br{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!_r(this))throw Pr(\"desiredSize\");return Sr(this)}close(){if(!_r(this))throw Pr(\"close\");if(!Tr(this))throw new TypeError(\"The stream is not in a state that permits close\");gr(this)}enqueue(e){if(!_r(this))throw Pr(\"enqueue\");if(!Tr(this))throw new TypeError(\"The stream is not in a state that permits enqueue\");return vr(this,e)}error(e){if(!_r(this))throw Pr(\"error\");wr(this,e)}[C](e){Pe(this);const t=this._cancelAlgorithm(e);return yr(this),t}[E](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=Te(this);this._closeRequested&&0===this._queue.length?(yr(this),Fr(t)):pr(this),e._chunkSteps(r)}else K(t,e),pr(this)}[O](){}}function _r(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledReadableStream\")&&e instanceof br}function pr(e){mr(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,p(e._pullAlgorithm(),()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,pr(e)),null),t=>(wr(e,t),null))))}function mr(e){const t=e._controlledReadableStream;return!!Tr(e)&&(!!e._started&&(!!(Ir(t)&&J(t)>0)||Sr(e)>0))}function yr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function gr(e){if(!Tr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(yr(e),Fr(t))}function vr(e,t){if(!Tr(e))return;const r=e._controlledReadableStream;if(Ir(r)&&J(r)>0)X(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw wr(e,t),t}try{Re(e,t,r)}catch(t){throw wr(e,t),t}}pr(e)}function wr(e,t){const r=e._controlledReadableStream;\"readable\"===r._state&&(Pe(e),yr(e),Lr(r,t))}function Sr(e){const t=e._controlledReadableStream._state;return\"errored\"===t?null:\"closed\"===t?0:e._strategyHWM-e._queueTotalSize}function Tr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&\"readable\"===t}function Rr(e,t,r,o,n,i,a){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Pe(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=a,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t,p(h(r()),()=>(t._started=!0,pr(t),null),e=>(wr(t,e),null))}function Pr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function qr(e){return n(t=e)&&void 0!==t.getReader?function(e){let t;return t=Wr(o,(function(){let r;try{r=e.read()}catch(r){return b(r)}return g(r,e=>{if(!n(e))throw new TypeError(\"The promise returned by the reader.read() method must fulfill with an object\");if(e.done)gr(t._readableStreamController);else{const r=e.value;vr(t._readableStreamController,r)}})}),(function(t){try{return h(e.cancel(t))}catch(t){return b(t)}}),0),t}(e.getReader()):function(e){let t;const r=function e(t,r=\"sync\",o){if(void 0===o)if(\"async\"===r){if(void 0===(o=he(t,_e)))return function(e){const t={next(){let t;try{t=pe(e)}catch(e){return b(e)}return be(t)},return(t){let r;try{const o=he(e.iterator,\"return\");if(void 0===o)return h({done:!0,value:t});r=S(o,e.iterator,[t])}catch(e){return b(e)}return n(r)?be(r):b(new TypeError(\"The iterator.return() method must return an object\"))}};return{iterator:t,nextMethod:t.next,done:!1}}(e(t,\"sync\",he(t,Symbol.iterator)))}else o=he(t,Symbol.iterator);if(void 0===o)throw new TypeError(\"The object is not iterable\");const i=S(o,t,[]);if(!n(i))throw new TypeError(\"The iterator method must return an object\");return{iterator:i,nextMethod:i.next,done:!1}}(e,\"async\");return t=Wr(o,(function(){let e;try{e=pe(r)}catch(e){return b(e)}return g(h(e),e=>{if(!n(e))throw new TypeError(\"The promise returned by the iterator.next() method must fulfill with an object\");if(e.done)gr(t._readableStreamController);else{const r=e.value;vr(t._readableStreamController,r)}})}),(function(e){const t=r.iterator;let o;try{o=he(t,\"return\")}catch(e){return b(e)}return void 0===o?h(void 0):g(T(o,t,[e]),e=>{if(!n(e))throw new TypeError(\"The promise returned by the iterator.return() method must fulfill with an object\")})}),0),t}(e);var t}function Cr(e,t,r){return $(e,r),r=>T(e,t,[r])}function Er(e,t,r){return $(e,r),r=>T(e,t,[r])}function Or(e,t,r){return $(e,r),r=>S(e,t,[r])}function jr(e,t){if(\"bytes\"!==(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function kr(e,t){L(e,t);const r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if(\"object\"!=typeof e||null===e)return!1;try{return\"boolean\"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(o),preventClose:Boolean(n),signal:i}}Object.defineProperties(br.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),a(br.prototype.close,\"close\"),a(br.prototype.enqueue,\"enqueue\"),a(br.prototype.error,\"error\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(br.prototype,Symbol.toStringTag,{value:\"ReadableStreamDefaultController\",configurable:!0});class Ar{constructor(e={},t={}){void 0===e?e=null:D(e,\"First parameter\");const r=_t(t,\"Second parameter\"),o=function(e,t){L(e,t);const r=e,o=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,i=null==r?void 0:r.pull,a=null==r?void 0:r.start,s=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===o?void 0:H(o,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:Cr(n,r,`${t} has member 'cancel' that`),pull:void 0===i?void 0:Er(i,r,`${t} has member 'pull' that`),start:void 0===a?void 0:Or(a,r,`${t} has member 'start' that`),type:void 0===s?void 0:jr(s,`${t} has member 'type' that`)}}(e,\"First parameter\");if(xr(this),\"bytes\"===o.type){if(void 0!==r.size)throw new RangeError(\"The strategy for a byte stream cannot have a size function\");!function(e,t,r){const o=Object.create(Ee.prototype);let n,i,a;n=void 0!==t.start?()=>t.start(o):()=>{},i=void 0!==t.pull?()=>t.pull(o):()=>h(void 0),a=void 0!==t.cancel?e=>t.cancel(e):()=>h(void 0);const s=t.autoAllocateChunkSize;if(0===s)throw new TypeError(\"autoAllocateChunkSize must be greater than 0\");et(e,o,n,i,a,r,s)}(this,o,ht(r,0))}else{const e=bt(r);!function(e,t,r,o){const n=Object.create(br.prototype);let i,a,s;i=void 0!==t.start?()=>t.start(n):()=>{},a=void 0!==t.pull?()=>t.pull(n):()=>h(void 0),s=void 0!==t.cancel?e=>t.cancel(e):()=>h(void 0),Rr(e,n,i,a,s,r,o)}(this,o,ht(r,1),e)}}get locked(){if(!Br(this))throw $r(\"locked\");return Ir(this)}cancel(e){return Br(this)?Ir(this)?b(new TypeError(\"Cannot cancel a stream that already has a reader\")):Mr(this,e):b($r(\"cancel\"))}getReader(e){if(!Br(this))throw $r(\"getReader\");return void 0===function(e,t){L(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:ot(r,`${t} has member 'mode' that`)}}(e,\"First parameter\").mode?G(this):nt(this)}pipeThrough(e,t={}){if(!Br(this))throw $r(\"pipeThrough\");N(e,1,\"pipeThrough\");const r=function(e,t){L(e,t);const r=null==e?void 0:e.readable;Q(r,\"readable\",\"ReadableWritablePair\"),V(r,`${t} has member 'readable' that`);const o=null==e?void 0:e.writable;return Q(o,\"writable\",\"ReadableWritablePair\"),wt(o,`${t} has member 'writable' that`),{readable:r,writable:o}}(e,\"First parameter\"),o=kr(t,\"Second parameter\");if(Ir(this))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream\");if(Ct(r.writable))throw new TypeError(\"ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream\");return v(hr(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}pipeTo(e,t={}){if(!Br(this))return b($r(\"pipeTo\"));if(void 0===e)return b(\"Parameter 1 is required in 'pipeTo'.\");if(!qt(e))return b(new TypeError(\"ReadableStream.prototype.pipeTo's first argument must be a WritableStream\"));let r;try{r=kr(t,\"Second parameter\")}catch(e){return b(e)}return Ir(this)?b(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream\")):Ct(e)?b(new TypeError(\"ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream\")):hr(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!Br(this))throw $r(\"tee\");return le(function(e,t){return Oe(e._readableStreamController)?function(e){let t,r,o,n,i,a=G(e),s=!1,l=!1,u=!1,c=!1,d=!1;const b=f(e=>{i=e});function _(e){y(e._closedPromise,t=>(e!==a||(Ve(o._readableStreamController,t),Ve(n._readableStreamController,t),c&&d||i(void 0)),null))}function p(){ut(a)&&(A(a),a=G(e),_(a)),re(a,{_chunkSteps:t=>{w(()=>{l=!1,u=!1;const r=t;let a=t;if(!c&&!d)try{a=Se(t)}catch(t){return Ve(o._readableStreamController,t),Ve(n._readableStreamController,t),void i(Mr(e,t))}c||He(o._readableStreamController,r),d||He(n._readableStreamController,a),s=!1,l?g():u&&v()})},_closeSteps:()=>{s=!1,c||Ye(o._readableStreamController),d||Ye(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Je(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Je(n._readableStreamController,0),c&&d||i(void 0)},_errorSteps:()=>{s=!1}})}function m(t,r){te(a)&&(A(a),a=nt(e),_(a));const f=r?n:o,h=r?o:n;ct(a,t,1,{_chunkSteps:t=>{w(()=>{l=!1,u=!1;const o=r?d:c;if(r?c:d)o||Ze(f._readableStreamController,t);else{let r;try{r=Se(t)}catch(t){return Ve(f._readableStreamController,t),Ve(h._readableStreamController,t),void i(Mr(e,t))}o||Ze(f._readableStreamController,t),He(h._readableStreamController,r)}s=!1,l?g():u&&v()})},_closeSteps:e=>{s=!1;const t=r?d:c,o=r?c:d;t||Ye(f._readableStreamController),o||Ye(h._readableStreamController),void 0!==e&&(t||Ze(f._readableStreamController,e),!o&&h._readableStreamController._pendingPullIntos.length>0&&Je(h._readableStreamController,0)),t&&o||i(void 0)},_errorSteps:()=>{s=!1}})}function g(){if(s)return l=!0,h(void 0);s=!0;const e=Ke(o._readableStreamController);return null===e?p():m(e._view,!1),h(void 0)}function v(){if(s)return u=!0,h(void 0);s=!0;const e=Ke(n._readableStreamController);return null===e?p():m(e._view,!0),h(void 0)}function S(){}return o=zr(S,g,(function(o){if(c=!0,t=o,d){const o=le([t,r]),n=Mr(e,o);i(n)}return b})),n=zr(S,v,(function(o){if(d=!0,r=o,c){const o=le([t,r]),n=Mr(e,o);i(n)}return b})),_(a),[o,n]}(e):function(e,t){const r=G(e);let o,n,i,a,s,l=!1,u=!1,c=!1,d=!1;const b=f(e=>{s=e});function _(){return l?(u=!0,h(void 0)):(l=!0,re(r,{_chunkSteps:e=>{w(()=>{u=!1;const t=e,r=e;c||vr(i._readableStreamController,t),d||vr(a._readableStreamController,r),l=!1,u&&_()})},_closeSteps:()=>{l=!1,c||gr(i._readableStreamController),d||gr(a._readableStreamController),c&&d||s(void 0)},_errorSteps:()=>{l=!1}}),h(void 0))}function p(){}return i=Wr(p,_,(function(t){if(c=!0,o=t,d){const t=le([o,n]),r=Mr(e,t);s(r)}return b})),a=Wr(p,_,(function(t){if(d=!0,n=t,c){const t=le([o,n]),r=Mr(e,t);s(r)}return b})),y(r._closedPromise,e=>(wr(i._readableStreamController,e),wr(a._readableStreamController,e),c&&d||s(void 0),null)),[i,a]}(e)}(this))}values(e){if(!Br(this))throw $r(\"values\");return function(e,t){const r=G(e),o=new me(r,t),n=Object.create(ye);return n._asyncIteratorImpl=o,n}(this,function(e,t){L(e,\"First parameter\");const r=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(r)}}(e).preventCancel)}[_e](e){return this.values(e)}static from(e){return qr(e)}}function Wr(e,t,r,o=1,n=(()=>1)){const i=Object.create(Ar.prototype);return xr(i),Rr(i,Object.create(br.prototype),e,t,r,o,n),i}function zr(e,t,r){const o=Object.create(Ar.prototype);return xr(o),et(o,Object.create(Ee.prototype),e,t,r,0,void 0),o}function xr(e){e._state=\"readable\",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Br(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_readableStreamController\")&&e instanceof Ar}function Ir(e){return void 0!==e._reader}function Mr(e,t){if(e._disturbed=!0,\"closed\"===e._state)return h(void 0);if(\"errored\"===e._state)return b(e._storedError);Fr(e);const r=e._reader;if(void 0!==r&&ut(r)){const e=r._readIntoRequests;r._readIntoRequests=new R,e.forEach(e=>{e._closeSteps(void 0)})}return g(e._readableStreamController[C](t),o)}function Fr(e){e._state=\"closed\";const t=e._reader;if(void 0!==t&&(I(t),te(t))){const e=t._readRequests;t._readRequests=new R,e.forEach(e=>{e._closeSteps()})}}function Lr(e,t){e._state=\"errored\",e._storedError=t;const r=e._reader;void 0!==r&&(B(r,t),te(r)?oe(r,t):dt(r,t))}function $r(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Dr(e,t){L(e,t);const r=null==e?void 0:e.highWaterMark;return Q(r,\"highWaterMark\",\"QueuingStrategyInit\"),{highWaterMark:U(r)}}Object.defineProperties(Ar,{from:{enumerable:!0}}),Object.defineProperties(Ar.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),a(Ar.from,\"from\"),a(Ar.prototype.cancel,\"cancel\"),a(Ar.prototype.getReader,\"getReader\"),a(Ar.prototype.pipeThrough,\"pipeThrough\"),a(Ar.prototype.pipeTo,\"pipeTo\"),a(Ar.prototype.tee,\"tee\"),a(Ar.prototype.values,\"values\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Ar.prototype,Symbol.toStringTag,{value:\"ReadableStream\",configurable:!0}),Object.defineProperty(Ar.prototype,_e,{value:Ar.prototype.values,writable:!0,configurable:!0});const Nr=e=>e.byteLength;a(Nr,\"size\");class Qr{constructor(e){N(e,1,\"ByteLengthQueuingStrategy\"),e=Dr(e,\"First parameter\"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Yr(this))throw Ur(\"highWaterMark\");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Yr(this))throw Ur(\"size\");return Nr}}function Ur(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Yr(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_byteLengthQueuingStrategyHighWaterMark\")&&e instanceof Qr}Object.defineProperties(Qr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Qr.prototype,Symbol.toStringTag,{value:\"ByteLengthQueuingStrategy\",configurable:!0});const Hr=()=>1;a(Hr,\"size\");class Vr{constructor(e){N(e,1,\"CountQueuingStrategy\"),e=Dr(e,\"First parameter\"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Kr(this))throw Gr(\"highWaterMark\");return this._countQueuingStrategyHighWaterMark}get size(){if(!Kr(this))throw Gr(\"size\");return Hr}}function Gr(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Kr(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_countQueuingStrategyHighWaterMark\")&&e instanceof Vr}function Xr(e,t,r){return $(e,r),r=>T(e,t,[r])}function Jr(e,t,r){return $(e,r),r=>S(e,t,[r])}function Zr(e,t,r){return $(e,r),(r,o)=>T(e,t,[r,o])}function eo(e,t,r){return $(e,r),r=>T(e,t,[r])}Object.defineProperties(Vr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(Vr.prototype,Symbol.toStringTag,{value:\"CountQueuingStrategy\",configurable:!0});class to{constructor(e={},t={},r={}){void 0===e&&(e=null);const o=_t(t,\"Second parameter\"),n=_t(r,\"Third parameter\"),i=function(e,t){L(e,t);const r=null==e?void 0:e.cancel,o=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,i=null==e?void 0:e.start,a=null==e?void 0:e.transform,s=null==e?void 0:e.writableType;return{cancel:void 0===r?void 0:eo(r,e,`${t} has member 'cancel' that`),flush:void 0===o?void 0:Xr(o,e,`${t} has member 'flush' that`),readableType:n,start:void 0===i?void 0:Jr(i,e,`${t} has member 'start' that`),transform:void 0===a?void 0:Zr(a,e,`${t} has member 'transform' that`),writableType:s}}(e,\"First parameter\");if(void 0!==i.readableType)throw new RangeError(\"Invalid readableType specified\");if(void 0!==i.writableType)throw new RangeError(\"Invalid writableType specified\");const a=ht(n,0),s=bt(n),l=ht(o,1),u=bt(o);let c;!function(e,t,r,o,n,i){function a(){return t}e._writable=function(e,t,r,o,n=1,i=(()=>1)){const a=Object.create(Tt.prototype);return Pt(a),Ut(a,Object.create(Nt.prototype),e,t,r,o,n,i),a}(a,(function(t){return function(e,t){const r=e._transformStreamController;return e._backpressure?g(e._backpressureChangePromise,()=>{const o=e._writable;if(\"erroring\"===o._state)throw o._storedError;return fo(r,t)}):fo(r,t)}(e,t)}),(function(){return function(e){const t=e._transformStreamController;if(void 0!==t._finishPromise)return t._finishPromise;const r=e._readable;t._finishPromise=f((e,r)=>{t._finishPromise_resolve=e,t._finishPromise_reject=r});const o=t._flushAlgorithm();return uo(t),p(o,()=>(\"errored\"===r._state?_o(t,r._storedError):(gr(r._readableStreamController),bo(t)),null),e=>(wr(r._readableStreamController,e),_o(t,e),null)),t._finishPromise}(e)}),(function(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._readable;r._finishPromise=f((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return uo(r),p(n,()=>(\"errored\"===o._state?_o(r,o._storedError):(wr(o._readableStreamController,t),bo(r)),null),e=>(wr(o._readableStreamController,e),_o(r,e),null)),r._finishPromise}(e,t)}),r,o),e._readable=Wr(a,(function(){return function(e){return ao(e,!1),e._backpressureChangePromise}(e)}),(function(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._writable;r._finishPromise=f((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t});const n=r._cancelAlgorithm(t);return uo(r),p(n,()=>(\"errored\"===o._state?_o(r,o._storedError):(Gt(o._writableStreamController,t),io(e),bo(r)),null),t=>(Gt(o._writableStreamController,t),io(e),_o(r,t),null)),r._finishPromise}(e,t)}),n,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,ao(e,!0),e._transformStreamController=void 0}(this,f(e=>{c=e}),l,u,a,s),function(e,t){const r=Object.create(so.prototype);let o,n,i;o=void 0!==t.transform?e=>t.transform(e,r):e=>{try{return co(r,e),h(void 0)}catch(e){return b(e)}},n=void 0!==t.flush?()=>t.flush(r):()=>h(void 0),i=void 0!==t.cancel?e=>t.cancel(e):()=>h(void 0),function(e,t,r,o,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=o,t._cancelAlgorithm=n,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}(e,r,o,n,i)}(this,i),void 0!==i.start?c(i.start(this._transformStreamController)):c(void 0)}get readable(){if(!ro(this))throw po(\"readable\");return this._readable}get writable(){if(!ro(this))throw po(\"writable\");return this._writable}}function ro(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_transformStreamController\")&&e instanceof to}function oo(e,t){wr(e._readable._readableStreamController,t),no(e,t)}function no(e,t){uo(e._transformStreamController),Gt(e._writable._writableStreamController,t),io(e)}function io(e){e._backpressure&&ao(e,!1)}function ao(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=f(t=>{e._backpressureChangePromise_resolve=t}),e._backpressure=t}Object.defineProperties(to.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(to.prototype,Symbol.toStringTag,{value:\"TransformStream\",configurable:!0});class so{constructor(){throw new TypeError(\"Illegal constructor\")}get desiredSize(){if(!lo(this))throw ho(\"desiredSize\");return Sr(this._controlledTransformStream._readable._readableStreamController)}enqueue(e){if(!lo(this))throw ho(\"enqueue\");co(this,e)}error(e){if(!lo(this))throw ho(\"error\");var t;t=e,oo(this._controlledTransformStream,t)}terminate(){if(!lo(this))throw ho(\"terminate\");!function(e){const t=e._controlledTransformStream;gr(t._readable._readableStreamController),no(t,new TypeError(\"TransformStream terminated\"))}(this)}}function lo(e){return!!n(e)&&!!Object.prototype.hasOwnProperty.call(e,\"_controlledTransformStream\")&&e instanceof so}function uo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function co(e,t){const r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!Tr(o))throw new TypeError(\"Readable side is not in a state that permits enqueue\");try{vr(o,t)}catch(e){throw no(r,e),r._readable._storedError}(function(e){return!mr(e)})(o)!==r._backpressure&&ao(r,!0)}function fo(e,t){return g(e._transformAlgorithm(t),void 0,t=>{throw oo(e._controlledTransformStream,t),t})}function ho(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function bo(e){void 0!==e._finishPromise_resolve&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function _o(e,t){void 0!==e._finishPromise_reject&&(v(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function po(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(so.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),a(so.prototype.enqueue,\"enqueue\"),a(so.prototype.error,\"error\"),a(so.prototype.terminate,\"terminate\"),\"symbol\"==typeof Symbol.toStringTag&&Object.defineProperty(so.prototype,Symbol.toStringTag,{value:\"TransformStreamDefaultController\",configurable:!0})},function(e,t,r){var o;r.r(t),function(e){e.local=\"local\",e.none=\"none\",e.session=\"session\"}(o||(o={}));var n=function(){},i=function(){};function a(e,t,r){void 0===r&&(r={});var o=/\\?/.test(t),n=\"\";for(var i in r)\"\"===n?!o&&(t+=\"?\"):n+=\"&\",n+=i+\"=\"+encodeURIComponent(r[i]);return/^http(s)?\\:\\/\\//.test(t+=n)?t:\"\"+e+t}r.d(t,\"StorageType\",(function(){return o})),r.d(t,\"AbstractSDKRequest\",(function(){return n})),r.d(t,\"AbstractStorage\",(function(){return i})),r.d(t,\"formatUrl\",(function(){return a}))}])}));"]}